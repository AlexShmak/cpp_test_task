# cpp_test_task

## Асимптотическая сложность:

- map_ (unordered_map): хранит key => {value, expires_at}
- expiry_heap_ (min-куча): хранит {key, expires_at} для удаления по времени
- Ключ хранится дважды: в map и в куче.

Обозначения
- `n` — число живых (неистекших) записей в map
- `H` — число элементов в куче (может быть > n из‑за повторных set)
- `U` — число неистекших записей (~ `n`)
- `|k|`, `|v|` — длины ключа и значения

Сложность по времени (средний случай)
- Конструктор (m элементов): `O(m log(m) + Σ|k|)` — фактически m раз set
- set: `O(|k| + log(H))`
- remove: `O(|k|)`
- get: `O(|k|)` на поиск + `O(|v|)` на копию возвращаемого значения
- getManySorted: `O(U log(U) + U * avg(|k|) + count*(|k| + |v|))` — собираем все ключи, сортируем, добираем до count
- removeOneExpiredEntry: амортизированно `O(log(H) + |k|)`; если верхушка кучи ещё не истекла — `O(1)`

## Оверхед на одну запись:

Память: оверхед на одну живую запись
- В map: `string(key)` + `string(value)` + `time_point` + узел хэш-таблицы + доля бакета
- В куче: `string(key)` + `time_point`
- Типично на `x86_64`:
  - `libc++`: ~ 112 байт на запись
  - `libstdc++`: ~ 136 байт на запись
